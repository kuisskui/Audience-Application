{% extends 'audience/base.html' %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Paris Olympic">
    <title>Sport Program</title>

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'audience/sports.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/css/flag-icons.min.css" rel="stylesheet">

    {% block script %}
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="{% static 'audience/sports.css' %}">
    {% endblock %}
</head>

<body>
    {% load custom_filters %}
    <div class="content">
        {% block content %}
        <h1 class="sportHeader">All Sports</h1>
        <input type="text" class="searchBar" id="searchBar" placeholder="Search...">

        <ul class="sportList" id="sportList">
            {% for sport in data.sport_list %}
                {% if not forloop.first %}
                <li id="{{ sport.sport_id }}">
                    <a href="{% url 'audience:sport' sport.sport_id %}">
                        <span>{{ sport.sport_name }}</span>
                       <span class="icon-container">
                        <i class="ri-2x" style="margin-left: 5px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="none">
                                {% if sport.sport_name == 'Beach Volleyball' %}
                                    <path d="M231.89 180.05c29.84 0 54.03-24.19 54.03-54.03S261.73 72 231.89 72s-54.03 24.19-54.03 54.03 24.2 54.02 54.03 54.02zm0-5c-4.92 0-9.66-.74-14.15-2.09 7.63-9.72 15.46-24.58 16.56-45.35 7.14-3.63 14.03-5.88 20.47-7.13l.01.03c.08.33 6.63 29.68-12.71 53.47-3.28.7-6.68 1.07-10.18 1.07zm49.03-49.02c0 20.64-12.83 38.33-30.93 45.55 14.92-23.04 10.39-48.64 9.74-51.87 7.92-.98 14.99-.53 20.83.43.22 1.93.36 3.89.36 5.89zm-1.31-11.23c-12.23-1.74-29.02-1.09-47.55 8.35-6.71-4.37-12.11-9.21-16.41-14.17l.02-.02c.25-.23 22.36-20.57 52.62-15.74a49.017 49.017 0 0 1 11.32 21.58zM231.89 77c11.46 0 22 3.96 30.36 10.57-27.39-1.38-47.28 15.33-49.74 17.51-4.8-6.36-7.96-12.7-10.05-18.23 8.2-6.18 18.4-9.85 29.43-9.85zm-33.57 13.34c4.61 11.46 13.57 25.66 30.99 36.98-.42 8-1.92 15.09-4.06 21.3l-.03-.01c-.33-.1-29.01-9.09-39.95-37.73 2.58-7.92 7.12-14.95 13.05-20.54zm-14.93 28.56c12.49 24.45 36.94 33.34 40.06 34.38a73.04 73.04 0 0 1-10.79 17.83c-17.5-7.49-29.79-24.88-29.79-45.09 0-2.41.18-4.79.52-7.12z"" fill="currentColor" />
                                    <path d="M272.11 323.95c-29.84 0-54.03 24.19-54.03 54.03S242.27 432 272.11 432s54.03-24.19 54.03-54.03-24.2-54.02-54.03-54.02zm0 5c4.92 0 9.66.74 14.15 2.09-7.63 9.72-15.46 24.58-16.56 45.35-7.14 3.63-14.03 5.88-20.47 7.13l-.01-.03c-.08-.33-6.63-29.68 12.71-53.47 3.28-.7 6.68-1.07 10.18-1.07zm-49.03 49.02c0-20.64 12.83-38.33 30.93-45.55-14.92 23.04-10.39 48.64-9.74 51.87-7.92.98-14.99.53-20.83-.43a51.89 51.89 0 0 1-.36-5.89zm1.31 11.23c12.23 1.74 29.02 1.09 47.55-8.35 6.71 4.37 12.11 9.21 16.41 14.17l-.02.02c-.25.23-22.36 20.57-52.62 15.74a49.017 49.017 0 0 1-11.32-21.58zm47.72 37.8c-11.46 0-22-3.96-30.36-10.57 27.39 1.38 47.28-15.33 49.74-17.51 4.8 6.36 7.96 12.7 10.05 18.23-8.2 6.18-18.4 9.85-29.43 9.85zm33.57-13.34c-4.61-11.46-13.57-25.66-30.99-36.98.42-8 1.92-15.09 4.06-21.3l.03.01c.33.1 29.01 9.09 39.95 37.73-2.58 7.92-7.12 14.95-13.05 20.54zm14.93-28.56c-12.49-24.45-36.94-33.34-40.06-34.38a73.04 73.04 0 0 1 10.79-17.83c17.5 7.49 29.79 24.88 29.79 45.09 0 2.41-.18 4.79-.52 7.12z" fill="currentColor"/>
                                    <path d="m432 252-63.51-63.52-3.54 3.54L424.93 252l-83.64 83.64-63.52-63.52 140.11-140.11-45.9-45.9-140.1 140.11-121.05-121.05-5.66 5.66 54 54L72 252l63.52 63.52 3.54-3.54L79.07 252l83.64-83.64 63.52 63.52-140.11 140.1 45.9 45.9 140.11-140.11 121.05 121.05 5.66-5.66-54-54L432 252zm-158.82 17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm-137.63 74.11 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm10.58 17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm7.07-35.29 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.65-17.64 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.65-17.64 14.11-14.11L252 255.54l-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.1 14.11-14.12-14.11zm116.46-88.23-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-10.58-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm-7.07 35.3-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.65 17.64-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.64 17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.65 17.64-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm3.54 31.76-14.11-14.11 14.11-14.11 14.11 14.11L290.83 252zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm31.75-31.75-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.64-17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zM93.19 371.98l278.8-278.8 3.54 3.54-278.8 278.8-3.54-3.54zm7.07 7.08 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm31.75 31.75L117.9 396.7l14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11L252 290.83l-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11z" fill="currentColor" />
                                {% elif sport.sport_name == 'Table Tennis' %}
                                    <path d="m342.918 155.46 50.275-50.262 5.656 5.658-50.275 50.26zM96.89 156.89c6.47 6.47 14.52 10.39 22.91 11.81l48.97-48.97a42.18 42.18 0 0 0-11.81-22.85l-8.08-8.08c-16.59-16.57-43.48-16.57-60.07 0s-16.59 43.44 0 60.01l8.08 8.08zm8.56-46.17c7.11 0 12.87 5.76 12.87 12.87 0 7.11-5.76 12.87-12.87 12.87-7.11 0-12.87-5.76-12.87-12.87 0-7.1 5.76-12.87 12.87-12.87zM169.21 130.6l-38.53 38.53c4.32-.38 8.6-1.41 12.66-3.11 3.77-1.49 8.08-.54 10.95 2.34l21.08 21.08a5.589 5.589 0 0 0 7.9 0l6.2-6.2a5.589 5.589 0 0 0 0-7.9l-21.06-21.06c-2.88-2.88-3.83-7.2-2.33-10.98a42.16 42.16 0 0 0 3.13-12.7zM105.17 393.186l50.274-50.26 5.656 5.657-50.275 50.26zM334.8 373.4l38.53-38.53c-4.32.38-8.6 1.41-12.66 3.11-3.77 1.49-8.08.54-10.95-2.34l-21.08-21.08a5.589 5.589 0 0 0-7.9 0l-6.2 6.2a5.589 5.589 0 0 0 0 7.9l21.06 21.06c2.88 2.88 3.83 7.2 2.33 10.98-1.72 4.08-2.74 8.37-3.13 12.7zM407.12 347.11c-6.47-6.47-14.52-10.39-22.91-11.81l-48.97 48.97a42.18 42.18 0 0 0 11.81 22.85l8.08 8.08c16.59 16.57 43.48 16.57 60.07 0s16.59-43.44 0-60.01l-8.08-8.08zm-8.55 46.17c-7.11 0-12.87-5.76-12.87-12.87 0-7.11 5.76-12.87 12.87-12.87s12.87 5.76 12.87 12.87c0 7.1-5.77 12.87-12.87 12.87z" fill="currentColor" />
                                    <path d="m287.52 420.69-91.25-91.25L261 264.55l51.27 51.4 3.54-3.54-51.28-51.4.01-.01 64.74-64.89 91.41 91.41-42.2 42.2c3.4.1 6.74.54 9.98 1.33L432 287.52l-97.07-97.07 16.17-16.21-21.54-21.54-16.17 16.21L216.48 72l-43.45 43.45c.81 3.25 1.27 6.58 1.37 9.94l42.08-42.08 91.26 91.26-64.72 64.88-51.27-51.4-3.54 3.54 51.28 51.4-.01.01-64.74 64.9-91.42-91.42 42.2-42.2c-3.4-.1-6.74-.54-9.98-1.33L72 216.48l97.08 97.08-16.16 16.2 21.54 21.54 16.16-16.2 96.9 96.9 43.47-43.47c-.81-3.25-1.27-6.59-1.37-9.95l-42.1 42.11zm42.04-260.91 14.47 14.46-12.64 12.67-14.47-14.47 12.64-12.66zm-18.28 18.33 14.47 14.47-12.8 12.83-14.47-14.46 12.8-12.84zm-16.34 16.37 14.47 14.46-13.78 13.81-14.46-14.47 13.77-13.8zm-17.31 17.35 14.46 14.47-13.78 13.81-14.46-14.46 13.78-13.82zm-17.31 17.36 14.46 14.46L261 257.46l-14.46-14.47 13.78-13.8zm-17.31 17.35 14.46 14.47-13.77 13.8-14.47-14.46 13.78-13.81zm-17.31 17.35 14.47 14.46-13.78 13.81-14.46-14.47 13.77-13.8zm-17.31 17.35 14.46 14.47-13.78 13.81-14.47-14.47 13.79-13.81zm-33.94 62.99-14.47-14.46 12.63-12.66 14.47 14.47-12.63 12.65zm3.82-32.8 12.81-12.84 14.47 14.47-12.81 12.84-14.47-14.47z" fill="currentColor" />
                                {% elif sport.sport_name == 'Volleyball' %}
                                    <path d="m432 252-63.51-63.52-3.54 3.54 16.28 16.28-83.64 83.64-19.82-19.82 140.11-140.11-45.9-45.9-140.1 140.11-121.05-121.05-5.66 5.66 54 54L72 252l63.52 63.52 3.54-3.54-16.28-16.28 83.64-83.64 19.82 19.82-140.12 140.1 45.9 45.9 140.11-140.11 121.05 121.05 5.66-5.66-54-54L432 252zm-312.76 40.16L79.07 252l83.64-83.64 40.16 40.17-83.63 83.63zm153.94-22.51-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm-137.63 74.11 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm10.58 17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm7.07-35.29 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.65-17.64 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm17.65-17.64 14.11-14.11L252 255.54l-14.11 14.11-14.11-14.11zm17.64-17.65 14.11-14.11 14.11 14.11-14.1 14.11-14.12-14.11zm116.46-88.23-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-10.58-17.65 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm-7.07 35.3-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.65 17.64-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.64 17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.65 17.64-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm3.54 31.76-14.11-14.11 14.11-14.11 14.11 14.11L290.83 252zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm31.75-31.75-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zm-17.64-17.65-14.11 14.11-14.11-14.11 14.11-14.11 14.11 14.11zM93.19 371.98l278.8-278.8 3.54 3.54-278.8 278.8-3.54-3.54zm7.07 7.08 14.11-14.11 14.11 14.11-14.11 14.11-14.11-14.11zm31.75 31.75L117.9 396.7l14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.64-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm17.65-17.64-14.11-14.11 14.11-14.11L252 290.83l-14.11 14.11zm17.65-17.65-14.11-14.11 14.11-14.11 14.11 14.11-14.11 14.11zm45.59 8.18 83.64-83.64L424.93 252l-83.64 83.64-40.16-40.17z" fill="currentColor" />
                                    <path d="M231.89 180.05c29.84 0 54.03-24.19 54.03-54.03S261.73 72 231.89 72s-54.03 24.19-54.03 54.03 24.19 54.02 54.03 54.02zm45.72-71.69a48.721 48.721 0 0 1 3.31 17.67c0 26.27-20.78 47.78-46.77 48.97-5.34-2.11-17.02-8.26-18.29-21.92-.72-7.69 1.89-14.79 4.4-19.67 21.4 3.67 38.39-6.74 44.81-16.09 4.78-6.97 9.63-8.66 12.54-8.96zM231.89 77c12.72 0 24.32 4.87 33.04 12.84-5.43-.18-13.58 1.98-22.66 12.72-16.34 19.31-36.91 15.25-36.91 15.25-3.21-16.17-7.03-22.41-9.68-24.8C204.65 83.18 217.56 77 231.89 77zm-48.09 39.51c6.96 2.89 15.51 18.79 17.37 22.37-3.26 5.52-5.71 13.41-2.61 23.05-9.64-8.96-15.69-21.73-15.69-35.9-.01-3.26.32-6.44.93-9.52zM272.11 323.95c-29.84 0-54.03 24.19-54.03 54.03s24.19 54.03 54.03 54.03 54.03-24.19 54.03-54.03c-.01-29.84-24.2-54.03-54.03-54.03zm-45.72 71.69a48.721 48.721 0 0 1-3.31-17.67c0-26.27 20.78-47.78 46.77-48.97 5.34 2.11 17.02 8.26 18.29 21.92.72 7.69-1.89 14.79-4.4 19.67-21.4-3.67-38.39 6.74-44.81 16.09-4.78 6.97-9.63 8.66-12.54 8.96zM272.11 427c-12.72 0-24.32-4.87-33.04-12.84 5.43.18 13.58-1.98 22.66-12.72 16.34-19.31 36.91-15.25 36.91-15.25 3.21 16.17 7.03 22.41 9.68 24.8-8.98 9.83-21.89 16.01-36.21 16.01zm48.09-39.51c-6.96-2.89-15.51-18.79-17.37-22.37 3.26-5.52 5.71-13.41 2.61-23.05 9.64 8.96 15.69 21.73 15.69 35.9 0 3.26-.32 6.44-.93 9.52z" fill="currentColor" />
                                {% else %}
                                    <path d="{{ sport.sport_icon.0 }}" fill="currentColor" />
                                {% endif %}
                            </svg>
                        </i>
                    </span>
                    </a>

                    {% if user.is_authenticated %}
                    <button class="subscribe-button {% if sport.sport_id in sport_list %}subscribed{% endif %}"
                        onclick="toggleSubscription(event, {{ sport.sport_id }})">
                        {% if sport.sport_id in sport_list %}
                        Subscribed
                        {% else %}
                        Subscribe
                        {% endif %}
                    </button>
                    {% endif %}
                </li>
                {% endif %}
            {% endfor %}
        </ul>

        <div id="messageIcon">
            <!-- Icon or link for messaging -->
        </div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchBar = document.getElementById('searchBar');
        const sportList = document.getElementById('sportList');

        searchBar.addEventListener('input', function () {
            const searchValue = searchBar.value.toLowerCase();

            document.querySelectorAll('.sportList li').forEach(function (sportItem) {
                const sportName = sportItem.querySelector('span').textContent.toLowerCase();

                sportItem.style.display = sportName.includes(searchValue) ? 'block' : 'none';
            });
        });
    });

       async function toggleSubscription(event, sportId) {
        event.preventDefault();

        const url = "{% url 'audience:subscribe' sport_id=0 %}".replace('0', sportId);

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
            });
            location.reload();
        } catch (error) {
            console.error('Error toggling subscription:', error);
        }
    }

    function updateSubscriptionStatus(button, sportId, subscribed) {
        const buttonText = subscribed ? 'Subscribed' : 'Subscribe';
        button.textContent = buttonText;

        const classToRemove = subscribed ? 'subscribe' : 'subscribed';
        const classToAdd = subscribed ? 'subscribed' : 'subscribe';

        button.classList.remove(`sport-${sportId}-${classToRemove}`);
        button.classList.add(`sport-${sportId}-${classToAdd}`);
    }
</script>


        {% endblock %}
    </div>
</body>

</html>
